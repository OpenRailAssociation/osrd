components:
  schemas:
    Allowance:
      discriminator:
        propertyName: allowance_type
      oneOf:
      - $ref: '#/components/schemas/EngineeringAllowance'
      - $ref: '#/components/schemas/StandardAllowance'
    AllowancePercentValue:
      properties:
        percentage:
          example: 15.0
          type: number
        value_type:
          enum:
          - percentage
          type: string
      required:
      - value_type
      - percentage
    AllowanceTimePerDistanceValue:
      properties:
        minutes:
          description: Minutes per 100k
          example: 5.0
          type: number
        value_type:
          enum:
          - time_per_distance
          type: string
      required:
      - value_type
      - minutes
    AllowanceTimeValue:
      properties:
        seconds:
          example: 180.0
          type: number
        value_type:
          enum:
          - time
          type: string
      required:
      - value_type
      - seconds
    AllowanceValue:
      discriminator:
        propertyName: value_type
      oneOf:
      - $ref: '#/components/schemas/AllowanceTimePerDistanceValue'
      - $ref: '#/components/schemas/AllowanceTimeValue'
      - $ref: '#/components/schemas/AllowancePercentValue'
    Battery:
      description: energy source for a rolling stock representing a battery
      properties:
        efficiency:
          format: float
          maximum: 1
          minimum: 0
          type: number
        energy_source_type:
          enum:
          - Battery
          type: string
        energy_storage:
          $ref: '#/components/schemas/EnergyStorage'
        max_input_power:
          $ref: '#/components/schemas/SpeedDependantPower'
        max_output_power:
          $ref: '#/components/schemas/SpeedDependantPower'
      required:
      - energy_source_type
      - max_input_power
      - max_output_power
      - energy_storage
      - efficiency
      type: object
    BoundingBox:
      description: A bounding box
      items:
        items:
          type: integer
        maxItems: 2
        minItems: 2
        type: array
      maxItems: 2
      minItems: 2
      type: array
    Catenary:
      description: energy source for a rolling stock representing a catenary
      properties:
        efficiency:
          format: float
          maximum: 1
          minimum: 0
          type: number
        energy_source_type:
          enum:
          - Catenary
          type: string
        max_input_power:
          $ref: '#/components/schemas/SpeedDependantPower'
        max_output_power:
          $ref: '#/components/schemas/SpeedDependantPower'
      required:
      - energy_source_type
      - max_input_power
      - max_output_power
      - efficiency
      type: object
    CatenaryRange:
      properties:
        begin:
          example: 0.0
          format: float
          type: number
        end:
          example: 100.0
          format: float
          type: number
        mode:
          example: '25000'
          type: string
      type: object
    Comfort:
      default: STANDARD
      description: Train comfort that will be used for the simulation
      enum:
      - AC
      - HEATING
      - STANDARD
      type: string
    ConditionalEffortCurve:
      properties:
        cond:
          nullable: true
          properties:
            comfort:
              $ref: '#/components/schemas/Comfort'
              nullable: true
            electrical_profile_level:
              nullable: true
              type: string
            power_restriction_code:
              nullable: true
              type: string
          type: object
        curve:
          $ref: '#/components/schemas/EffortCurve'
      type: object
    DeleteOperation:
      properties:
        obj_id:
          example: bd840b06-84ba-4566-98c1-ccf0196c5f16
          type: string
        obj_type:
          $ref: '#/components/schemas/ObjectType'
        operation_type:
          enum:
          - DELETE
          type: string
      required:
      - operation_type
      - obj_type
      - obj_id
    Direction:
      enum:
      - START_TO_STOP
      - STOP_TO_START
      type: string
    DirectionalTrackRange:
      description: Track range associated with a direction
      properties:
        begin:
          format: float
          type: number
        direction:
          $ref: '#/components/schemas/Direction'
        end:
          example: 100.0
          format: float
          type: number
        track:
          example: 01234567-89ab-cdef-0123-456789abcdef
          type: string
      required:
      - track
      - begin
      - end
      - direction
      type: object
    EffortCurve:
      properties:
        max_efforts:
          example:
          - 23500.0
          - 23200.0
          - 21200.0
          items:
            format: float
            type: number
          minItems: 2
          type: array
        speeds:
          example:
          - 0.0
          - 2.958
          - 46.719
          items:
            format: float
            type: number
          minItems: 2
          type: array
      type: object
    ElectricalProfile:
      properties:
        power_class:
          example: '1'
          type: string
        track_ranges:
          items:
            $ref: '#/components/schemas/TrackRange'
          type: array
        value:
          example: A
          type: string
      type: object
    ElectrificationRange:
      properties:
        electrificationUsage:
          discriminator:
            propertyName: object_type
          oneOf:
          - $ref: '#/components/schemas/Electrified'
          - $ref: '#/components/schemas/Neutral'
          - $ref: '#/components/schemas/NonElectrified'
        start:
          format: double
          type: number
        stop:
          format: double
          type: number
      required:
      - start
      - stop
      - is_electrified
      - electrificationUsage
    Electrified:
      properties:
        mode:
          type: string
        mode_handled:
          type: boolean
        object_type:
          enum:
          - Electrified
          type: string
        profile:
          nullable: true
          type: string
        profile_handled:
          type: boolean
      required:
      - mode
      - mode_handled
      - object_type
      - profile_handled
    EnergySource:
      description: enery source of a rolling stock
      discriminator:
        propertyName: energy_source_type
      oneOf:
      - $ref: '#/components/schemas/Catenary'
      - $ref: '#/components/schemas/PowerPack'
      - $ref: '#/components/schemas/Battery'
    EnergyStorage:
      description: energy storage of an energy source (of a rolling stock, can be a electrical battery or a hydrogen/fuel powerPack)
      properties:
        capacity:
          format: float
          type: number
        refill_law:
          description: physical law defining how the storage can be refilled
          nullable: true
          properties:
            soc_ref:
              format: float
              maximum: 1
              minimum: 0
              type: number
            tau:
              format: float
              minimum: 0
              type: number
          required:
          - tau
          - soc_ref
          type: object
        soc:
          format: float
          maximum: 1
          minimum: 0
          type: number
        soc_max:
          format: float
          maximum: 1
          minimum: 0
          type: number
        soc_min:
          format: float
          maximum: 1
          minimum: 0
          type: number
      required:
      - capacity
      - soc
      - soc_min
      - soc_max
      - refill_law
      type: object
    EngineeringAllowance:
      allOf:
      - properties:
          allowance_type:
            enum:
            - engineering
            type: string
          capacity_speed_limit:
            format: double
            type: number
          distribution:
            enum:
            - MARECO
            - LINEAR
            type: string
        required:
        - allowance_type
        - distribution
        type: object
      - $ref: '#/components/schemas/RangeAllowance'
    GeoJsonObject:
      description: GeoJson format
      properties:
        coordinates:
          items:
            items:
              format: float
              type: number
            type: array
          type: array
        type:
          type: string
      required:
      - coordinates
      - type
      type: object
    GeoJsonPosition:
      properties:
        coordinates:
          items:
            format: float
            type: number
          maxItems: 2
          minItems: 2
          type: array
        type:
          type: string
      required:
      - coordinates
      - type
      type: object
    Geometry:
      description: Definition of a GeoJSON geometry
      oneOf:
      - $ref: '#/components/schemas/Point'
      - $ref: '#/components/schemas/LineString'
      - $ref: '#/components/schemas/Polygon'
      - $ref: '#/components/schemas/MultiPoint'
      - $ref: '#/components/schemas/MultiLineString'
      - $ref: '#/components/schemas/MultiPolygon'
      type: object
    Infra:
      properties:
        created:
          format: date
          type: string
        generated_version:
          example: '1'
          nullable: true
          type: string
        id:
          type: integer
        locked:
          type: boolean
        modified:
          format: date
          type: string
        name:
          type: string
        railjson_version:
          example: 3.3.1
          type: string
        state:
          enum:
          - NOT_LOADED
          - INITIALIZING
          - DOWNLOADING
          - PARSING_JSON
          - PARSING_INFRA
          - ADAPTING_KOTLIN
          - LOADING_SIGNALS
          - BUILDING_BLOCKS
          - CACHED
          - TRANSIENT_ERROR
          - ERROR
          type: string
        version:
          example: '1'
          type: string
      required:
      - id
      - name
      - version
      - railjson_version
      - generated_version
      - created
      - modified
      - locked
      - state
    InfraError:
      description: An infra error or warning
      properties:
        geographic:
          $ref: '#/components/schemas/Geometry'
          description: Geojson of the geographic geometry of the error
          nullable: true
        information:
          description: Information about the error (check schema documentation for more details)
          properties:
            error_type:
              $ref: '#/components/schemas/InfraErrorType'
            field:
              type: string
            is_warning:
              type: boolean
            obj_id:
              type: string
            obj_type:
              enum:
              - TrackSection
              - Signal
              - BufferStop
              - Detector
              - Switch
              - Route
              type: string
          required:
          - obj_id
          - obj_type
          - error_type
          - is_warning
          type: object
        schematic:
          description: Geojson of the schematic geometry of the error
          nullable: true
          type: object
      required:
      - information
      type: object
    InfraErrorType:
      description: Type of the infra error
      enum:
      - duplicated_group
      - empty_object
      - invalid_group
      - invalid_reference
      - invalid_route
      - invalid_switch_ports
      - missing_route
      - missing_buffer_stop
      - object_out_of_path
      - odd_buffer_stop_location
      - out_of_range
      - overlapping_speed_sections
      - overlapping_switches
      - overlapping_track_links
      - overlapping_catenaries
      - unknown_port_name
      - unused_port
      type: string
    LightRollingStock:
      allOf:
      - $ref: '#/components/schemas/RollingStockBase'
      - properties:
          effort_curves:
            properties:
              default_mode:
                type: string
              modes:
                additionalProperties:
                  properties:
                    is_electric:
                      type: boolean
                  required:
                  - is_electric
                  type: object
                type: object
            required:
            - default_mode
            - modes
            type: object
          id:
            type: number
          liveries:
            items:
              $ref: '#/components/schemas/RollingStockLivery'
            type: array
        required:
        - id
        - liveries
        - effort_curves
        type: object
    LineString:
      description: GeoJSon geometry
      properties:
        coordinates:
          items:
            $ref: '#/components/schemas/Point3D'
          type: array
        type:
          enum:
          - LineString
          type: string
      required:
      - type
      - coordinates
      type: object
    MultiLineString:
      description: GeoJSon geometry
      properties:
        coordinates:
          items:
            items:
              $ref: '#/components/schemas/Point3D'
            type: array
          type: array
        type:
          enum:
          - MultiLineString
          type: string
      required:
      - type
      - coordinates
      type: object
    MultiPoint:
      description: GeoJSon geometry
      properties:
        coordinates:
          items:
            $ref: '#/components/schemas/Point3D'
          type: array
        type:
          enum:
          - MultiPoint
          type: string
      required:
      - type
      - coordinates
      type: object
    MultiPolygon:
      description: GeoJSon geometry
      properties:
        coordinates:
          items:
            items:
              items:
                $ref: '#/components/schemas/Point3D'
              type: array
            type: array
          type: array
        type:
          enum:
          - MultiPolygon
          type: string
      required:
      - type
      - coordinates
      type: object
    Neutral:
      properties:
        is_lower_pantograph:
          type: boolean
        object_type:
          enum:
          - Neutral
          type: string
      required:
      - is_lower_pantograph
      - object_type
    NonElectrified:
      properties:
        object_type:
          enum:
          - NonElectrified
          type: string
      required:
      - object_type
    ObjectType:
      description: Type of the object
      enum:
      - TrackSection
      - Signal
      - SpeedSection
      - Detector
      - TrackSectionLink
      - Switch
      - SwitchType
      - BufferStop
      - Route
      - OperationalPoint
      - Catenary
      type: string
    Operation:
      oneOf:
      - $ref: '#/components/schemas/RailjsonObject'
      - $ref: '#/components/schemas/DeleteOperation'
      - $ref: '#/components/schemas/UpdateOperation'
    OperationObject:
      properties:
        obj_type:
          $ref: '#/components/schemas/ObjectType'
        operation_type:
          enum:
          - CREATE
          - UPDATE
          type: string
        railjson:
          $ref: '#/components/schemas/Railjson'
      required:
      - operation_type
      - obj_type
      - railjson
    OperationResult:
      oneOf:
      - $ref: '#/components/schemas/DeleteOperation'
      - $ref: '#/components/schemas/OperationObject'
    Patch:
      description: A JSONPatch document as defined by RFC 6902
      properties:
        from:
          description: A string containing a JSON Pointer value.
          type: string
        op:
          description: The operation to be performed
          enum:
          - add
          - remove
          - replace
          - move
          - copy
          - test
          type: string
        path:
          description: A JSON-Pointer
          type: string
        value:
          description: The value to be used within the operations.
          type: object
      required:
      - op
      - path
    Patches:
      description: A list of Patch
      items:
        $ref: '#/components/schemas/Patch'
      type: array
    Path:
      properties:
        created:
          format: date-time
          type: string
        curves:
          description: Curves on the path
          items:
            properties:
              position:
                format: float
                type: number
              radius:
                format: float
                type: number
            required:
            - radius
            - position
            type: object
          type: array
        geographic:
          $ref: '#/components/schemas/GeoJsonObject'
        id:
          type: integer
        length:
          description: Length of the path
          format: float
          type: number
        owner:
          format: uuid
          type: string
        schematic:
          $ref: '#/components/schemas/GeoJsonObject'
        slopes:
          description: Slopes on the path
          items:
            properties:
              gradient:
                format: float
                type: number
              position:
                format: float
                type: number
            required:
            - gradient
            - position
            type: object
          type: array
        steps:
          items:
            $ref: '#/components/schemas/PathStep'
          type: array
      required:
      - id
      - owner
      - created
      - length
      - geographic
      - schematic
      - slopes
      - curves
      - steps
    PathQuery:
      properties:
        infra:
          type: number
        rolling_stocks:
          description: List of rolling stocks that must be able to use this path
          items:
            type: integer
          type: array
        steps:
          items:
            properties:
              duration:
                format: float
                type: number
              waypoints:
                items:
                  $ref: '#/components/schemas/PathWaypoint'
                type: array
            required:
            - duration
            - waypoints
            type: object
          minItems: 2
          type: array
      required:
      - infra
      - steps
      - rolling_stocks
      type: object
    PathStep:
      properties:
        duration:
          format: float
          type: number
        geo:
          $ref: '#/components/schemas/GeoJsonPosition'
        id:
          type: string
        location:
          $ref: '#/components/schemas/TrackSectionLocation'
        name:
          type: string
        path_offset:
          description: Offset of the step in the path
          format: float
          type: number
        sch:
          $ref: '#/components/schemas/GeoJsonPosition'
        suggestion:
          type: boolean
      required:
      - suggestion
      - duration
      - path_offset
      - location
      - sch
      - geo
      type: object
    PathWaypoint:
      properties:
        geo_coordinate:
          items:
            format: float
            type: number
          maxItems: 2
          minItems: 2
          type: array
        offset:
          type: number
        track_section:
          description: track section ID of the waypoint
          type: string
      required:
      - track_section
      - geo_cordinate
      type: object
    Point:
      description: GeoJSon geometry
      properties:
        coordinates:
          $ref: '#/components/schemas/Point3D'
        type:
          enum:
          - Point
          type: string
      required:
      - type
      - coordinates
      type: object
    Point3D:
      description: Point in 3D space
      items:
        type: number
      maxItems: 3
      minItems: 2
      type: array
    Polygon:
      description: GeoJSon geometry
      properties:
        coordinates:
          items:
            items:
              $ref: '#/components/schemas/Point3D'
            type: array
          type: array
        type:
          enum:
          - Polygon
          type: string
      required:
      - type
      - coordinates
      type: object
    PowerPack:
      description: energy source for a rolling stock representing a power pack (hydrogen, fuel...)
      properties:
        efficiency:
          format: float
          maximum: 1
          minimum: 0
          type: number
        energy_source_type:
          enum:
          - PowerPack
          type: string
        energy_storage:
          $ref: '#/components/schemas/EnergyStorage'
        max_input_power:
          $ref: '#/components/schemas/SpeedDependantPower'
        max_output_power:
          $ref: '#/components/schemas/SpeedDependantPower'
      required:
      - energy_source_type
      - max_input_power
      - max_output_power
      - energy_storage
      - efficiency
      type: object
    PowerRestrictionRange:
      description: A range along the train path where a power restriction is applied.
      example:
        begin_position: 0.0
        end_position: 1000.0
        power_restriction_code: C1US
      properties:
        begin_position:
          description: Offset from the start of the path, in meters.
          format: float
          type: number
        end_position:
          description: Offset from the start of the path, in meters.
          format: float
          type: number
        power_restriction_code:
          description: The power restriction code to apply.
          type: string
      required:
      - begin_position
      - end_position
      - power_restriction_code
      type: object
    PowerRestrictionRangeItem:
      properties:
        code:
          type: string
        handled:
          type: boolean
        start:
          format: double
          type: number
        stop:
          format: double
          type: number
      required:
      - start
      - stop
      - code
      - handled
    ProjectCreateRequest:
      properties:
        budget:
          type: integer
        description:
          default: ''
          maxLength: 1024
          type: string
        funders:
          default: ''
          maxLength: 1024
          type: string
        image:
          description: The id of the image in the document table
          type: integer
        name:
          maxLength: 128
          type: string
        objectives:
          default: ''
          maxLength: 4096
          type: string
        tags:
          items:
            maxLength: 255
            type: string
          type: array
      required:
      - name
    ProjectPatchRequest:
      properties:
        budget:
          type: integer
        description:
          maxLength: 1024
          type: string
        funders:
          maxLength: 1024
          type: string
        image:
          description: The id of the image in the document table
          type: integer
        name:
          maxLength: 128
          type: string
        objectives:
          maxLength: 4096
          type: string
        tags:
          items:
            maxLength: 255
            type: string
          type: array
    ProjectResult:
      properties:
        budget:
          type: integer
        creation_date:
          format: date-time
          type: string
        description:
          type: string
        funders:
          type: string
        id:
          type: integer
        image:
          description: the image id
          nullable: true
          type: integer
        last_modification:
          format: date-time
          type: string
        name:
          type: string
        objectives:
          type: string
        studies_count:
          type: integer
        tags:
          items:
            type: string
          type: array
    Railjson:
      additionalProperties: true
      description: This field follows railjson format
      example:
        curves: []
        geo:
          coordinates:
          - - 1.0
            - 41.0
          - - 2.0
            - 42.0
          type: LineString
        id: bd840b06-84ba-4566-98c1-ccf0196c5f16
        length: 1000
        line_code: 1
        line_name: my line
        navigability: BOTH
        sch:
          coordinates:
          - - 1.0
            - 41.0
          - - 2.0
            - 42.0
          type: LineString
        slopes:
        - begin: 250
          end: 500
          gradient: -1
        track_name: track name
        track_number: 1
      properties:
        id:
          type: string
      required:
      - id
      type: object
    RailjsonFile:
      properties:
        buffer_stops:
          type: array
        catenaries:
          type: array
        detectors:
          type: array
        operational_points:
          type: array
        routes:
          type: array
        signals:
          type: array
        speed_sections:
          type: array
        switch_types:
          type: array
        switches:
          type: array
        track_section_links:
          type: array
        track_sections:
          type: array
        version:
          type: string
    RailjsonObject:
      properties:
        obj_type:
          $ref: '#/components/schemas/ObjectType'
        operation_type:
          enum:
          - CREATE
          type: string
        railjson:
          $ref: '#/components/schemas/Railjson'
      required:
      - operation_type
      - obj_type
      - railjson
    RangeAllowance:
      properties:
        begin_position:
          type: number
        end_position:
          example: 1000.0
          type: number
        value:
          $ref: '#/components/schemas/AllowanceValue'
      required:
      - begin_position
      - end_position
      - value
    RollingStock:
      allOf:
      - $ref: '#/components/schemas/RollingStockUpsertPayload'
      - properties:
          id:
            type: number
          liveries:
            items:
              $ref: '#/components/schemas/RollingStockLivery'
            type: array
        required:
        - id
        - liveries
        type: object
    RollingStockBase:
      properties:
        base_power_class:
          example: '5'
          type: string
        comfort_acceleration:
          format: float
          type: number
        electrical_power_startup_time:
          description: The time the train takes before actually using electrical power (in seconds). Is null if the train is not electric.
          example: 5.0
          format: float
          nullable: true
          type: number
        energy_sources:
          items:
            $ref: '#/components/schemas/EnergySource'
          type: array
        features:
          items:
            type: string
          type: array
        gamma:
          properties:
            type:
              enum:
              - CONST
              - MAX
              type: string
            value:
              format: float
              type: number
          required:
          - type
          - value
          type: object
        inertia_coefficient:
          format: float
          type: number
        length:
          format: float
          type: number
        loading_gauge:
          enum:
          - G1
          - G2
          - GA
          - GB
          - GB1
          - GC
          - FR3.3
          - FR3.3/GB/G2
          - GLOTT
          type: string
        locked:
          default: false
          description: Whether the rolling stock can be edited/deleted or not.
          type: boolean
        mass:
          format: float
          type: number
        max_speed:
          format: float
          type: number
        metadata:
          example:
            detail: BB 7200
            family: LOCOMOTIVES
            grouping: Locomotives électriques courant continu
            number: '1'
            reference: '7200'
            series: BB 7200
            subseries: GV
            type: Locomotives électriques
            unit: US
          properties:
            detail:
              type: string
            family:
              type: string
            grouping:
              type: string
            number:
              type: string
            reference:
              type: string
            series:
              type: string
            subseries:
              type: string
            type:
              type: string
            unit:
              type: string
          required:
          - detail
          - family
          - grouping
          - number
          - reference
          - series
          - subseries
          - type
          - unit
          type: object
        name:
          type: string
        power_restrictions:
          additionalProperties:
            type: string
          description: Mapping of power restriction code to power class
          example:
            C1US: '4'
            C2US: '3'
          type: object
        railjson_version:
          example: '3.0'
          type: string
        raise_pantograph_time:
          description: The time it takes to raise this train's pantograph in seconds. Is null if the train is not electric.
          example: 15.0
          format: float
          nullable: true
          type: number
        rolling_resistance:
          properties:
            A:
              type: number
            B:
              type: number
            C:
              type: number
            type:
              enum:
              - davis
              type: string
          required:
          - A
          - B
          - C
          - type
          type: object
        startup_acceleration:
          format: float
          type: number
        startup_time:
          format: float
          type: number
      required:
      - railjson_version
      - name
      - length
      - max_speed
      - startup_time
      - startup_acceleration
      - comfort_acceleration
      - gamma
      - inertia_coefficient
      - features
      - mass
      - rolling_resistance
      - loading_gauge
      - base_power_class
      - power_restrictions
      - metadata
      - energy_sources
      - electrical_power_startup_time
      - raise_pantograph_time
    RollingStockLivery:
      properties:
        compound_image_id:
          nullable: true
          type: number
        id:
          type: number
        name:
          type: string
      required:
      - id
      - name
      - compound_image_id
    RollingStockUpsertPayload:
      allOf:
      - $ref: '#/components/schemas/RollingStockBase'
      - properties:
          effort_curves:
            properties:
              default_mode:
                type: string
              modes:
                additionalProperties:
                  properties:
                    curves:
                      items:
                        $ref: '#/components/schemas/ConditionalEffortCurve'
                      type: array
                    default_curve:
                      $ref: '#/components/schemas/EffortCurve'
                    is_electric:
                      type: boolean
                  required:
                  - curves
                  - default_curve
                  - is_electric
                  type: object
                type: object
            required:
            - default_mode
            - modes
            type: object
        required:
        - effort_curves
        type: object
    RollingStockUsage:
      properties:
        rolling_stock_id:
          type: integer
        usage:
          properties:
            project_id:
              type: integer
            project_name:
              type: string
            scenario_id:
              type: integer
            scenario_name:
              type: string
            study_id:
              type: integer
            study_name:
              type: string
            train_name:
              type: string
            train_schedule_id:
              type: integer
          required:
          - train_schedule_id
          - train_name
          - project_id
          - project_name
          - study_id
          - study_name
          - scenario_id
          - scenario_name
          type: object
      required:
      - rolling_stock_id
      - usage
      type: object
    RouteTrackRangesCantComputePathError:
      description: Error when the route path couldn't be computed
      properties:
        type:
          enum:
          - CantComputePath
          type: string
      required:
      - type
      type: object
    RouteTrackRangesComputed:
      description: Route track ranges successfully computed
      properties:
        track_ranges:
          items:
            $ref: '#/components/schemas/DirectionalTrackRange'
          type: array
        type:
          enum:
          - Computed
          type: string
      required:
      - type
      - track_ranges
      type: object
    RouteTrackRangesNotFoundError:
      description: Error when the route id couldn't be found
      properties:
        type:
          enum:
          - NotFound
          type: string
      required:
      - type
      type: object
    ScenarioListResult:
      properties:
        creation_date:
          format: date-time
          type: string
        description:
          type: string
        electrical_profile_set_id:
          nullable: true
          type: integer
        electrical_profile_set_name:
          nullable: true
          type: string
        id:
          type: integer
        infra_id:
          type: integer
        infra_name:
          type: string
        last_modification:
          format: date-time
          type: string
        name:
          type: string
        study_id:
          type: integer
        tags:
          items:
            type: string
          type: array
        timetable_id:
          type: integer
        trains_count:
          type: integer
    ScenarioPatchRequest:
      properties:
        description:
          maxLength: 1024
          type: string
        name:
          maxLength: 128
          type: string
        tags:
          items:
            maxLength: 255
            type: string
          type: array
    ScenarioRequest:
      properties:
        description:
          maxLength: 1024
          type: string
        electrical_profile_set_id:
          description: Electrical profile set id (if any)
          type: number
        infra_id:
          type: integer
        name:
          maxLength: 128
          type: string
        tags:
          items:
            maxLength: 255
            type: string
          type: array
      required:
      - name
      - infra_id
    ScenarioResult:
      properties:
        creation_date:
          format: date-time
          type: string
        description:
          type: string
        electrical_profile_set_id:
          nullable: true
          type: integer
        electrical_profile_set_name:
          nullable: true
          type: string
        id:
          type: integer
        infra_id:
          type: integer
        infra_name:
          type: string
        last_modification:
          format: date-time
          type: string
        name:
          type: string
        study_id:
          type: integer
        tags:
          items:
            type: string
          type: array
        timetable_id:
          type: integer
        trains_count:
          type: integer
        trains_schedules:
          items:
            properties:
              departure_time:
                type: string
              id:
                type: integer
              train_name:
                type: string
              train_path:
                type: integer
            type: object
          type: array
    SearchOperationalPointResult:
      properties:
        ch:
          type: string
        geographic:
          $ref: '#/components/schemas/MultiPoint'
        infra_id:
          type: string
        name:
          type: string
        obj_id:
          type: string
        schematic:
          $ref: '#/components/schemas/MultiPoint'
        track_sections:
          items:
            properties:
              position:
                type: integer
              track:
                type: string
            required:
            - track
            - position
            type: object
          type: array
        trigram:
          type: string
        uic:
          type: integer
      required:
      - obj_id
      - name
      - geographic
      - ch
      - schematic
      - trigram
      - track_sections
    SearchProjectResult:
      properties:
        description:
          type: string
        id:
          type: integer
        image:
          type: integer
        last_modification:
          format: date-time
          type: string
        name:
          type: string
        studies_count:
          type: integer
        tags:
          type: array
      required:
      - id
      - name
      - description
      - last_modification
    SearchQuery:
      example:
      - and
      - - or
        - - search
          - - name
          - mich st
        - - search
          - - trigram
          - null
      - - =
        - - infra_id
        - 2
      items:
        oneOf:
        - type: boolean
        - type: number
        - type: integer
        - type: string
        - $ref: '#/components/schemas/SearchQuery'
      minItems: 1
      nullable: true
      type: array
    SearchScenarioResult:
      properties:
        description:
          type: string
        electrical_profile_set_id:
          type: integer
        id:
          type: integer
        infra_id:
          type: integer
        infra_name:
          type: string
        last_modification:
          format: date-time
          type: string
        name:
          type: string
        study_id:
          type: integer
        tags:
          items:
            type: string
          type: array
        trains_count:
          type: integer
      required:
      - id
      - name
      - study_id
      - last_modification
      - infra_id
      - timetable_id
    SearchSignalResult:
      properties:
        aspects:
          items:
            type: string
          type: array
        geographic:
          $ref: '#/components/schemas/Point'
        infra_id:
          type: integer
        label:
          type: string
        line_code:
          type: integer
        line_name:
          type: string
        schematic:
          $ref: '#/components/schemas/Point'
        systems:
          items:
            type: string
          type: array
        type:
          type: string
      required:
      - label
      - geographic
      - schematic
      - line_code
      - line_name
    SearchStudyResult:
      properties:
        description:
          type: string
        id:
          type: integer
        last_modification:
          format: date-time
          type: string
        name:
          type: string
        project_id:
          type: integer
        scenarios_count:
          type: integer
        tags:
          items:
            type: string
          type: array
      required:
      - id
      - name
      - project_id
      - last_modification
    SearchTrackResult:
      properties:
        infra_id:
          type: integer
        line_code:
          type: integer
        line_name:
          type: string
      required:
      - infra_id
      - line_code
      - line_name
    SimulationReport:
      properties:
        base:
          $ref: '#/components/schemas/SimulationReportByTrain'
        curves:
          items:
            properties:
              position:
                type: number
              radius:
                type: number
            required:
            - position
            - radius
            type: object
          minItems: 2
          type: array
        eco:
          $ref: '#/components/schemas/SimulationReportByTrain'
        electrification_ranges:
          description: A list of ranges which should be contiguous and which describe the electrification on the path and if it is handled by the train
          items:
            $ref: '#/components/schemas/ElectrificationRange'
          minItems: 1
          type: array
        id:
          type: integer
        labels:
          items:
            type: string
          type: array
        name:
          type: string
        path:
          description: id of the path used for projection
          type: integer
        power_restriction_ranges:
          description: The list of ranges where power restrictions are applied
          items:
            $ref: '#/components/schemas/PowerRestrictionRangeItem'
          type: array
        slopes:
          items:
            properties:
              gradient:
                type: number
              position:
                type: number
            required:
            - position
            - gradient
            type: object
          minItems: 2
          type: array
        speed_limit_tags:
          type: string
        vmax:
          items:
            properties:
              position:
                type: number
              speed:
                type: number
            required:
            - position
            - speed
            type: object
          minItems: 2
          type: array
      required:
      - id
      - name
      - labels
      - path
      - vmax
      - slopes
      - curves
      - base
      - electrification_ranges
      - power_restriction_ranges
    SimulationReportByTrain:
      properties:
        head_positions:
          items:
            items:
              $ref: '#/components/schemas/SpaceTimePosition'
            minItems: 1
            type: array
          minItems: 1
          type: array
        mechanical_energy_consumed:
          format: float
          type: number
        route_aspects:
          items:
            properties:
              aspect_label:
                description: label of the new signal aspect
                type: string
              blinking:
                description: true if the signal is blinking
                type: boolean
              color:
                description: color of the aspect (Bits 24-31 are alpha, 16-23 are red, 8-15 are green, 0-7 are blue)
                format: float
                type: number
              position_end:
                description: the route ends at this position on the train path
                format: float
                type: number
              position_start:
                description: the route starts at this position on the train path
                format: float
                type: number
              route_id:
                description: id of the affected route on the train path
                type: string
              signal_id:
                description: id of the updated signal
                type: string
              time_end:
                description: the aspect stops being displayed at this time
                format: float
                type: number
              time_start:
                description: the aspect starts being displayed at this time
                format: float
                type: number
            required:
            - signal_id
            - route_id
            - time_start
            - time_end
            - position_start
            - position_end
            - color
            - blinking
            - aspect_label
            type: object
          type: array
        signals:
          items:
            properties:
              aspects:
                items:
                  type: string
                type: array
              geo_position:
                items:
                  format: float
                  type: number
                maxItems: 2
                minItems: 2
                type: array
              schema_position:
                items:
                  format: float
                  type: number
                maxItems: 2
                minItems: 2
                type: array
              signal_id:
                type: integer
            required:
            - signal_id
            - aspects
            - geo_position
            - schema_position
            type: object
          type: array
        speeds:
          items:
            allOf:
            - $ref: '#/components/schemas/SpaceTimePosition'
            - properties:
                speed:
                  format: float
                  type: number
              required:
              - speed
              type: object
          minItems: 1
          type: array
        stops:
          items:
            properties:
              duration:
                format: float
                type: number
              id:
                description: Can be null if it's not an operational point
                type: number
              line_code:
                type: number
              line_name:
                type: string
              name:
                description: Can be 'Unknown' if it's not an operational point
                type: string
              position:
                format: float
                type: number
              time:
                format: float
                type: number
              track_name:
                type: string
              track_number:
                type: number
            required:
            - id
            - name
            - time
            - position
            - duration
            - line_code
            - track_number
            - line_name
            - track_name
            type: object
          type: array
        tail_positions:
          items:
            items:
              $ref: '#/components/schemas/SpaceTimePosition'
            minItems: 1
            type: array
          minItems: 1
          type: array
      required:
      - speeds
      - head_positions
      - tail_positions
      - stops
      - route_aspects
      - signals
      - mechanical_energy_consumed
    SpaceTimePosition:
      properties:
        position:
          format: float
          type: number
        time:
          format: float
          type: number
      required:
      - time
      - position
      - speed
      type: object
    SpeedDependantPower:
      description: power-speed curve (in an energy source)
      properties:
        powers:
          items:
            format: float
            type: number
          type: array
        speeds:
          items:
            format: float
            type: number
          type: array
      required:
      - speeds
      - powers
      type: object
    StandardAllowance:
      properties:
        allowance_type:
          enum:
          - standard
          type: string
        capacity_speed_limit:
          format: double
          type: number
        default_value:
          $ref: '#/components/schemas/AllowanceValue'
        distribution:
          enum:
          - MARECO
          - LINEAR
          type: string
        ranges:
          items:
            $ref: '#/components/schemas/RangeAllowance'
          type: array
      required:
      - allowance_type
      - default_value
      - ranges
      - distribution
    StudyResult:
      properties:
        actual_end_date:
          format: date-time
          nullable: true
          type: string
        budget:
          type: integer
        business_code:
          type: string
        creation_date:
          format: date-time
          type: string
        description:
          type: string
        expected_end_date:
          format: date-time
          nullable: true
          type: string
        id:
          type: integer
        last_modification:
          format: date-time
          type: string
        name:
          type: string
        project_id:
          type: integer
        scenarios_count:
          type: integer
        service_code:
          type: string
        start_date:
          format: date-time
          nullable: true
          type: string
        state:
          enum:
          - started
          - inProgress
          - finish
          type: string
        study_type:
          enum:
          - timeTables
          - flowRate
          - parkSizing
          - garageRequirement
          - operationOrSizing
          - operability
          - strategicPlanning
          - chartStability
          - disturbanceTests
          type: string
        tags:
          items:
            type: string
          type: array
      required:
      - id
      - name
      - project_id
      - description
      - budget
      - tags
      - service_code
      - business_code
      - creation_date
      - last_modification
      - scenarios_count
      - start_date
      - expected_end_date
      - actual_end_date
    StudyUpsertRequest:
      properties:
        actual_end_date:
          format: date-time
          nullable: true
          type: string
        budget:
          type: integer
        business_code:
          maxLength: 128
          type: string
        description:
          maxLength: 1024
          type: string
        expected_end_date:
          format: date-time
          nullable: true
          type: string
        name:
          maxLength: 128
          type: string
        service_code:
          maxLength: 128
          type: string
        start_date:
          format: date-time
          nullable: true
          type: string
        state:
          enum:
          - started
          - inProgress
          - finish
          type: string
        study_type:
          enum:
          - timeTables
          - flowRate
          - parkSizing
          - garageRequirement
          - operationOrSizing
          - operability
          - strategicPlanning
          - chartStability
          - disturbanceTests
          type: string
        tags:
          items:
            maxLength: 255
            type: string
          type: array
      required:
      - name
      - tags
    TimetableWithSchedulesDetails:
      properties:
        id:
          type: integer
        name:
          type: string
        train_schedule_summaries:
          items:
            $ref: '#/components/schemas/TrainScheduleSummary'
          type: array
      required:
      - id
      - name
      - train_schedule_summaries
      type: object
    TrackLocation:
      description: A track location (track section and offset)
      properties:
        offset:
          description: The offset on the track section
          example: 42.0
          format: float
          type: number
        track:
          description: The track section ID
          example: 61205924-6667-11e3-81ff-01f464e0362d
          type: string
      type: object
    TrackRange:
      description: Track range
      properties:
        begin:
          format: float
          type: number
        end:
          example: 100
          format: float
          type: number
        track:
          example: 01234567-89ab-cdef-0123-456789abcdef
          type: string
      type: object
    TrackSectionLocation:
      description: A track location (track section and offset)
      properties:
        offset:
          description: The offset on the track section
          example: 42.0
          format: float
          type: number
        track_section:
          description: The track section ID
          example: 61205924-6667-11e3-81ff-01f464e0362d
          type: string
      required:
      - track_section
      - offset
      type: object
    TrainSchedule:
      properties:
        allowances:
          items:
            $ref: '#/components/schemas/Allowance'
          type: array
        comfort:
          $ref: '#/components/schemas/Comfort'
        departure_time:
          format: float
          type: number
        initial_speed:
          format: float
          type: number
        labels:
          items:
            type: string
          type: array
        options:
          allOf:
          - $ref: '#/components/schemas/TrainScheduleOptions'
          nullable: true
        path:
          type: integer
        power_restriction_ranges:
          description: A list of ranges along the train path where power restrictions apply.
          items:
            $ref: '#/components/schemas/PowerRestrictionRange'
          nullable: true
          type: array
        rolling_stock:
          type: integer
        scheduled_points:
          items:
            properties:
              path_offset:
                description: Offset in meters from the start of the path at which the train must be.
                format: float
                type: number
              time:
                description: Time in seconds (elapsed since the train's departure) at which the train must be.
                format: float
                type: number
            required:
            - path_offset
            - time
            type: object
          type: array
        speed_limit_tags:
          description: Train category for speed limits
          type: string
        timetable:
          type: integer
        train_name:
          type: string
      type: object
    TrainScheduleOptions:
      description: Options for the standalone simulation
      properties:
        ignore_electrical_profiles:
          nullable: true
          type: boolean
      type: object
    TrainScheduleSummary:
      properties:
        allowances:
          items:
            $ref: '#/components/schemas/Allowance'
          type: array
        arrival_time:
          type: number
        comfort:
          $ref: '#/components/schemas/Comfort'
        departure_time:
          format: float
          type: number
        id:
          type: integer
        initial_speed:
          format: float
          type: number
        labels:
          items:
            type: string
          type: array
        mechanical_energy_consumed:
          properties:
            base:
              type: number
            eco:
              type: number
          type: object
        options:
          allOf:
          - $ref: '#/components/schemas/TrainScheduleOptions'
          nullable: true
        path_id:
          type: integer
        path_length:
          type: integer
        power_restriction_ranges:
          description: A list of ranges along the train path where power restrictions apply.
          items:
            $ref: '#/components/schemas/PowerRestrictionRange'
          nullable: true
          type: array
        rolling_stock_id:
          type: integer
        speed_limit_tags:
          description: Train category for speed limits
          type: string
        stops_count:
          type: integer
        timetable_id:
          type: integer
        train_name:
          type: string
      required:
      - id
      - train_name
      - departure_time
      - path
      - labels
      - arrival_time
      - mechanical_energy_consumed
      type: object
    UpdateOperation:
      properties:
        obj_id:
          example: bd840b06-84ba-4566-98c1-ccf0196c5f16
          type: string
        obj_type:
          $ref: '#/components/schemas/ObjectType'
        operation_type:
          enum:
          - UPDATE
          type: string
        railjson_patch:
          $ref: '#/components/schemas/Patches'
      required:
      - operation_type
      - obj_type
      - railjson_patch
    ViewMetadata:
      properties:
        attribution:
          type: string
        maxzoom:
          example: 18
          type: integer
        minzoom:
          type: integer
        name:
          example: track_sections
          type: string
        promotedId:
          example:
            track_sections: id
          type: object
        scheme:
          example: xyz
          type: string
        tiles:
          items:
            example: http://localhost:7070/tile/track_sections/geo/{z}/{x}/{y}/?infra=1
            type: string
          type: array
        type:
          example: vector
          type: string
    Zone:
      properties:
        geo:
          $ref: '#/components/schemas/BoundingBox'
        sch:
          $ref: '#/components/schemas/BoundingBox'
      type: object
info:
  description: OSRD Edition service description
  title: OSRD Editoast
  version: 0.1.0
openapi: 3.0.2
paths:
  /documents/:
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                properties:
                  document_key:
                    example: 42
                    type: integer
                type: object
          description: The key of the added document
      summary: Add a document
      tags:
      - documents
  /documents/{key}/:
    delete:
      parameters:
      - description: A key identifying the document
        in: path
        name: key
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: No content
      summary: Delete a document
      tags:
      - documents
    get:
      parameters:
      - description: A key identifying the document
        in: path
        name: key
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: A document of any type (can be an image, a pdf...)
      summary: Retrieve a document binary content
      tags:
      - documents
  /electrical_profile_set/:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  properties:
                    id:
                      type: integer
                    name:
                      example: France 2023
                      type: string
                  required:
                  - id
                  - name
                  type: object
                type: array
          description: The list of ids and names of electrical profile sets available
      summary: Retrieve the list of ids and names of electrical profile sets available
      tags:
      - electrical_profiles
    post:
      parameters:
      - in: query
        name: name
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ElectricalProfile'
          description: The list of ids and names of electrical profile sets available
      summary: import a new electrical profile set
      tags:
      - electrical_profiles
  /electrical_profile_set/{id}/:
    get:
      parameters:
      - description: Electrical profile set ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ElectricalProfile'
                type: array
          description: The list of electrical profiles in the set
      summary: Retrieve the set of electrical profiles with the given id
      tags:
      - electrical_profiles
  /electrical_profile_set/{id}/level_order/:
    get:
      parameters:
      - description: Electrical profile set ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties:
                  items:
                    type: string
                  type: array
                example:
                  '1500':
                  - A
                  - B
                  - C
                  '25000':
                  - '25000'
                  - '22500'
                  - '20000'
                type: object
          description: A dictionary mapping catenary modes to a list of electrical profiles ordered by decreasing strength
      summary: Retrieve the order of strength of the electrical profiles in the set with the given id
      tags:
      - electrical_profiles
  /health/:
    get:
      responses:
        '200':
          description: Check if Editoast is running correctly
  /infra/:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  count:
                    type: number
                  next: {}
                  previous: {}
                  results:
                    items:
                      $ref: '#/components/schemas/Infra'
                    type: array
                required:
                - count
                - next
                - previous
                type: object
          description: The infra list
      summary: List all available infra
      tags:
      - infra
    post:
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
              type: object
        description: Name of the infra to create
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Infra'
          description: The created infra
      summary: Create an infra
      tags:
      - infra
  /infra/railjson/:
    post:
      parameters:
      - description: Infra name
        in: query
        name: name
        required: true
        schema:
          type: string
      - in: query
        name: generate_data
        schema:
          default: false
          description: whether the layer should be generated or no
          type: boolean
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RailjsonFile'
        description: Railjson infra
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                properties:
                  id:
                    type: string
                type: object
          description: The imported infra id
      summary: Import an infra from railjson
      tags:
      - infra
  /infra/refresh/:
    post:
      parameters:
      - description: A list of infra ID
        in: query
        name: infras
        schema:
          default: []
          items:
            type: integer
          type: array
      - description: Force the refresh of the layers
        in: query
        name: force
        schema:
          default: false
          type: boolean
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  type: integer
                type: array
          description: A list thats contains the ID of the infras that were refreshed*
      summary: Refresh the layers
      tags:
      - infra
  /infra/{id}/:
    delete:
      parameters:
      - description: infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: No content
      summary: Delete an infra and all entities linked to it
      tags:
      - infra
    get:
      parameters:
      - description: infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Infra'
          description: Information about the retrieved infra
      summary: Retrieve a specific infra
      tags:
      - infra
    post:
      parameters:
      - description: infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              items:
                $ref: '#/components/schemas/Operation'
              type: array
        description: Operations to do on the infra
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/OperationResult'
                type: array
          description: An array containing infos about the operations processed
      summary: Update/Create/Delete an object of the infra
      tags:
      - infra
    put:
      parameters:
      - description: infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
              type: object
        description: the name we want to give to the infra
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Infra'
          description: The updated infra
      summary: Update an infrastructure name
      tags:
      - infra
  /infra/{id}/attached/{track_id}/:
    get:
      parameters:
      - description: Infra ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: Track ID
        in: path
        name: track_id
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties:
                  items:
                    description: Object IDs
                    type: string
                  type: array
                example:
                  BufferStop: []
                  Detector:
                  - detector.0
                  Switch:
                  - switch.0
                  - switch.1
                type: object
          description: All objects attached to the given track (arranged by types)
      summary: Retrieve all objects attached to a given track
      tags:
      - infra
  /infra/{id}/clone/:
    post:
      parameters:
      - description: Infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: New infra name
        in: query
        name: name
        required: true
        schema:
          type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                properties:
                  id:
                    type: integer
                type: object
          description: The duplicated infra id
      summary: Duplicate an infra
      tags:
      - infra
  /infra/{id}/errors/:
    get:
      parameters:
      - description: infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: The page number
        in: query
        name: page
        schema:
          default: 1
          type: integer
      - description: The number of item per page
        in: query
        name: page_size
        schema:
          default: 25
          minimum: 10
          type: integer
      - description: The type of error to filter on
        in: query
        name: error_type
        schema:
          $ref: '#/components/schemas/InfraErrorType'
      - description: errors and warnings that only part of a given object
        in: query
        name: object_id
        schema:
          type: string
      - description: Whether the response should include errors or warnings
        in: query
        name: level
        schema:
          default: all
          enum:
          - errors
          - warnings
          - all
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  count:
                    description: Total number of elements
                    example: 1
                    type: integer
                  next:
                    description: The index of the following page (null if no more pages available)
                    example: null
                    nullable: true
                    type: integer
                  previous:
                    description: The index of the previous page (null if requesting the first page)
                    example: null
                    nullable: true
                    type: integer
                  results:
                    items:
                      $ref: '#/components/schemas/InfraError'
                    type: array
                type: object
          description: A paginated list of errors
      summary: Retrieve a paginated list of errors
      tags:
      - infra
  /infra/{id}/lines/{line_code}/bbox/:
    get:
      parameters:
      - description: infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: a line code
        in: path
        name: line_code
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Zone'
          description: The BBox of the line
      summary: Returns the BBoxes (geo and schematic) of a line
      tags:
      - infra
  /infra/{id}/load/:
    post:
      parameters:
      - description: infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: No content
      summary: Load an infra if not loaded
      tags:
      - infra
  /infra/{id}/lock/:
    post:
      parameters:
      - description: infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: No content
      summary: Lock an infra from edition
      tags:
      - infra
  /infra/{id}/objects/{object_type}/:
    post:
      parameters:
      - description: Infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: The type of the object
        in: path
        name: object_type
        required: true
        schema:
          $ref: '#/components/schemas/ObjectType'
      requestBody:
        content:
          application/json:
            schema:
              items:
                type: string
              type: array
        description: List of object id's
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  properties:
                    geographic:
                      $ref: '#/components/schemas/Geometry'
                      description: object's geographic in geojson format
                    railjson:
                      $ref: '#/components/schemas/Railjson'
                      description: Object properties in railjson format
                    schematic:
                      $ref: '#/components/schemas/Geometry'
                      description: object's schematic in geojson format
                  required:
                  - railjson
                  - geographic
                  - schematic
                  type: object
                type: array
          description: No content
      summary: Retrieve a list of specific objects in railjson format
      tags:
      - infra
  /infra/{id}/pathfinding/:
    post:
      parameters:
      - description: Infra ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: Maximum number of paths to return
        in: query
        name: number
        schema:
          default: 5
          format: integer
          maximum: 5
          minimum: 1
          type: number
      requestBody:
        content:
          application/json:
            schema:
              properties:
                ending:
                  $ref: '#/components/schemas/TrackLocation'
                starting:
                  allOf:
                  - $ref: '#/components/schemas/TrackLocation'
                  - properties:
                      direction:
                        $ref: '#/components/schemas/Direction'
                    type: object
              type: object
        description: Starting and ending track location
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  properties:
                    detectors:
                      items:
                        example: detector1
                        type: string
                      type: array
                    switches_directions:
                      additionalProperties:
                        type: string
                      example:
                        switch1: left
                        switch2: right
                      type: object
                    track_ranges:
                      items:
                        $ref: '#/components/schemas/DirectionalTrackRange'
                      minItems: 1
                      type: array
                  type: object
                type: array
          description: Paths, containing track ranges, detectors and switches with their directions. If no path is found, an empty list is returned.
      summary: Compute paths given starting and ending track location. Return shortest paths.
      tags:
      - infra
      - pathfinding
  /infra/{id}/railjson/:
    get:
      parameters:
      - description: Infra ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RailjsonFile'
          description: The infra in railjson format
      summary: Serialize an infra to railjson
      tags:
      - infra
  /infra/{id}/routes/track_ranges/:
    get:
      parameters:
      - description: Infra ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      - in: query
        name: routes
        required: true
        schema:
          description: A list of routes seperated by comma
          example: route1,route2,route3
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  oneOf:
                  - $ref: '#/components/schemas/RouteTrackRangesNotFoundError'
                  - $ref: '#/components/schemas/RouteTrackRangesCantComputePathError'
                  - $ref: '#/components/schemas/RouteTrackRangesComputed'
                type: array
          description: Foreach route, the track ranges through which it passes or an error
      summary: Compute the track ranges through which routes passes.
      tags:
      - infra
      - routes
  /infra/{id}/routes/{waypoint_type}/{waypoint_id}/:
    get:
      parameters:
      - description: Infra ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: Type of the waypoint
        in: path
        name: waypoint_type
        required: true
        schema:
          enum:
          - Detector
          - BufferStop
          type: string
      - description: The waypoint id
        in: path
        name: waypoint_id
        required: true
        schema:
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  ending:
                    example:
                    - route3
                    - route4
                    items:
                      type: string
                    type: array
                  starting:
                    example:
                    - route1
                    - route2
                    items:
                      type: string
                    type: array
                type: object
          description: All routes that starting and ending by the given waypoint
      summary: Retrieve all routes that starting and ending by the given waypoint (detector or buffer stop)
      tags:
      - infra
      - routes
  /infra/{id}/speed_limit_tags/:
    get:
      parameters:
      - description: Infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                example:
                - freight
                - heavy_load
                items:
                  type: string
                type: array
          description: Tags list
      summary: List all speed limit tags
      tags:
      - infra
  /infra/{id}/switch_types/:
    get:
      parameters:
      - description: infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  description: A switch type following Railjson spec
                  example:
                    groups:
                      LEFT:
                        dst: LEFT
                        src: BASE
                      RIGHT:
                        dst: RIGHT
                        src: BASE
                    id: Point
                    ports:
                    - LEFT
                    - RIGHT
                    - BASE
                  type: object
                type: array
          description: A list of switch types
      summary: Retrieve a list of switch types
      tags:
      - infra
  /infra/{id}/unlock/:
    post:
      parameters:
      - description: infra id
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: No content
      summary: Unlock an infra from edition
      tags:
      - infra
  /infra/{id}/voltages/:
    get:
      parameters:
      - description: Infra ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: include rolling stocks modes or not
        in: query
        name: include_rolling_stock_modes
        required: false
        schema:
          type: boolean
      responses:
        '200':
          content:
            application/json:
              schema:
                example:
                - '750'
                - '1500'
                - '2500.5'
                items:
                  type: string
                type: array
          description: Voltages list
      summary: List all voltages
      tags:
      - infra
  /layers/layer/{layer_slug}/mvt/{view_slug}/:
    get:
      parameters:
      - in: path
        name: layer_slug
        required: true
        schema:
          title: Layer Slug
          type: string
      - in: path
        name: view_slug
        required: true
        schema:
          title: View Slug
          type: string
      - in: query
        name: infra
        required: true
        schema:
          title: Infra id
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ViewMetadata'
          description: Successful Response
      summary: Mvt View Metadata
      tags:
      - layers
  /layers/tile/{layer_slug}/{view_slug}/{z}/{x}/{y}/:
    get:
      parameters:
      - in: path
        name: layer_slug
        required: true
        schema:
          title: Layer Slug
          type: string
      - in: path
        name: view_slug
        required: true
        schema:
          title: View Slug
          type: string
      - in: path
        name: z
        required: true
        schema:
          title: Z
          type: integer
      - in: path
        name: x
        required: true
        schema:
          title: X
          type: integer
      - in: path
        name: y
        required: true
        schema:
          title: Y
          type: integer
      - in: query
        name: infra
        required: true
        schema:
          title: Infra
          type: integer
      responses:
        '200':
          content:
            application/x-octet-stream:
              schema:
                type: string
          description: Successful Response
      summary: Mvt tile from the cache or the database, cache data in redis if needed
      tags:
      - layers
  /light_rolling_stock/:
    get:
      parameters:
      - description: Page number
        in: query
        name: page
        schema:
          default: 1
          minimum: 1
          type: integer
      - description: Number of elements by page
        in: query
        name: page_size
        schema:
          default: 100
          maximum: 10000
          minimum: 1
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  count:
                    type: number
                  next: {}
                  previous: {}
                  results:
                    items:
                      $ref: '#/components/schemas/LightRollingStock'
                    type: array
                required:
                - results
                type: object
          description: The rolling stock list
      summary: Paginated list of rolling stock with a lighter response
      tags:
      - rolling_stock
  /light_rolling_stock/{id}/:
    get:
      parameters:
      - description: Rolling Stock ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LightRollingStock'
          description: The rolling stock with their simplified effort curves
      summary: Retrieve a rolling stock's light representation
      tags:
      - rolling_stock
  /pathfinding/:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PathQuery'
        description: Path information
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Path'
          description: The created Path
      summary: Create a Path
  /pathfinding/{id}/:
    delete:
      parameters:
      - description: Path ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: No content
      summary: Delete a path
      tags:
      - pathfinding
    get:
      parameters:
      - description: Path ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Path'
          description: The retrieved path
      summary: Retrieve a Path
      tags:
      - pathfinding
    put:
      parameters:
      - description: Path ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PathQuery'
        description: Updated Path
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Path'
                type: array
          description: The updated path
      summary: Update a path
      tags:
      - pathfinding
  /pathfinding/{path_id}/catenaries/:
    get:
      parameters:
      - description: The path's id
        in: path
        name: path_id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  catenary_ranges:
                    items:
                      $ref: '#/components/schemas/CatenaryRange'
                    type: array
                  warnings:
                    items:
                      properties:
                        catenary_id:
                          type: string
                        overlapping_ranges:
                          items:
                            $ref: '#/components/schemas/TrackRange'
                          type: array
                        type:
                          enum:
                          - CatenaryOverlap
                          type: string
                      type: object
                    type: array
                type: object
          description: A list of ranges associated to catenary modes. When a catenary overlapping another is found, a warning is added to the list.
      summary: Retrieve the modes of catenaries along a path
      tags:
      - infra
  /projects/:
    get:
      parameters:
      - in: query
        name: ordering
        schema:
          enum:
          - NameAsc
          - NameDesc
          - CreationDateAsc
          - CreationDateDesc
          - LastModifiedAsc
          - LastModifiedDesc
          type: string
      - description: Filter projects by name
        in: query
        name: name
        schema:
          type: string
      - description: Filter projects by description
        in: query
        name: description
        schema:
          type: string
      - description: Filter projects by tags
        in: query
        name: tags
        schema:
          type: string
      - description: Page number
        in: query
        name: page
        schema:
          minimum: 0
          type: integer
      - description: Number of elements by page
        in: query
        name: page_size
        schema:
          default: 100
          maximum: 10000
          minimum: 1
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  count:
                    type: number
                  next: {}
                  previous: {}
                  results:
                    items:
                      $ref: '#/components/schemas/ProjectResult'
                    type: array
                type: object
          description: the project list
      summary: Paginated list of projects
      tags:
      - projects
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectCreateRequest'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectResult'
          description: The created project
      summary: Create a new project
      tags:
      - projects
  /projects/{project_id}/:
    delete:
      parameters:
      - description: project id you want to delete
        in: path
        name: project_id
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: No content
      summary: delete a project
      tags:
      - projects
    get:
      parameters:
      - description: project id you want to retrieve
        in: path
        name: project_id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectResult'
          description: The project info
      summary: Retrieve a project
      tags:
      - projects
    patch:
      parameters:
      - description: project id you want to update
        in: path
        name: project_id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectPatchRequest'
        description: The fields you want to update
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectResult'
          description: The project updated
      summary: Update a project
      tags:
      - projects
  /projects/{project_id}/studies/:
    get:
      parameters:
      - in: path
        name: project_id
        required: true
        schema:
          type: integer
      - in: query
        name: ordering
        schema:
          enum:
          - NameAsc
          - NameDesc
          - CreationDateAsc
          - CreationDateDesc
          - LastModifiedAsc
          - LastModifiedDesc
          type: string
      - description: Filter operational studies by name
        in: query
        name: name
        schema:
          type: string
      - description: Filter operational studies by description
        in: query
        name: description
        schema:
          type: string
      - description: Filter operational studies by tags
        in: query
        name: tags
        schema:
          type: string
      - description: Page number
        in: query
        name: page
        schema:
          minimum: 0
          type: integer
      - description: Number of elements by page
        in: query
        name: page_size
        schema:
          default: 100
          maximum: 10000
          minimum: 1
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  count:
                    type: number
                  next: {}
                  previous: {}
                  results:
                    items:
                      $ref: '#/components/schemas/StudyResult'
                    type: array
                type: object
          description: the studies list
      summary: Paginated list of operational studies
      tags:
      - studies
    post:
      parameters:
      - in: path
        name: project_id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StudyUpsertRequest'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudyResult'
          description: The created operational study
      summary: Create a new operational study
      tags:
      - studies
  /projects/{project_id}/studies/{study_id}/:
    delete:
      parameters:
      - description: project id refered to the operational study
        in: path
        name: project_id
        required: true
        schema:
          type: integer
      - description: study id you want to delete
        in: path
        name: study_id
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: No content
      summary: delete an operational study
      tags:
      - studies
    get:
      parameters:
      - description: project id refered to the operational study
        in: path
        name: project_id
        required: true
        schema:
          type: integer
      - description: study id you want to retrieve
        in: path
        name: study_id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudyResult'
          description: The operational study info
      summary: Retrieve an operational study
      tags:
      - studies
    patch:
      parameters:
      - description: project id refered to the study
        in: path
        name: project_id
        required: true
        schema:
          type: integer
      - description: study id you want to retrieve
        in: path
        name: study_id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StudyUpsertRequest'
        description: The fields you want to update
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StudyResult'
          description: The operational study updated
      summary: update an operational study
      tags:
      - studies
  /projects/{project_id}/studies/{study_id}/scenarios/:
    get:
      parameters:
      - in: path
        name: project_id
        required: true
        schema:
          type: integer
      - in: path
        name: study_id
        required: true
        schema:
          type: integer
      - in: query
        name: ordering
        schema:
          enum:
          - NameAsc
          - NameDesc
          - CreationDateAsc
          - CreationDateDesc
          - LastModifiedAsc
          - LastModifiedDesc
          type: string
      - description: Page number
        in: query
        name: page
        schema:
          minimum: 0
          type: integer
      - description: Number of elements by page
        in: query
        name: page_size
        schema:
          default: 100
          maximum: 10000
          minimum: 1
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  count:
                    type: number
                  next: {}
                  previous: {}
                  results:
                    items:
                      $ref: '#/components/schemas/ScenarioListResult'
                    type: array
                type: object
          description: list of scenarios
      summary: Paginated list of scenarios
      tags:
      - scenarios
    post:
      parameters:
      - in: path
        name: project_id
        required: true
        schema:
          type: integer
      - in: path
        name: study_id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScenarioRequest'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioResult'
          description: The created scenario
      summary: Create a new scenario
      tags:
      - scenarios
  /projects/{project_id}/studies/{study_id}/scenarios/{scenario_id}/:
    delete:
      parameters:
      - description: project id refered to the scenario
        in: path
        name: project_id
        required: true
        schema:
          type: integer
      - description: study id refered to the scenario
        in: path
        name: study_id
        required: true
        schema:
          type: integer
      - description: scenario id you want to delete
        in: path
        name: scenario_id
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: No content
      summary: delete a scenario
      tags:
      - scenarios
    get:
      parameters:
      - description: project id refered to the scenario
        in: path
        name: project_id
        required: true
        schema:
          type: integer
      - in: path
        name: study_id
        required: true
        schema:
          type: integer
      - description: scenario id you want to retrieve
        in: path
        name: scenario_id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioResult'
          description: The operational study info
      summary: Retrieve a scenario
      tags:
      - scenarios
    patch:
      parameters:
      - description: project id refered to the scenario
        in: path
        name: project_id
        required: true
        schema:
          type: integer
      - description: study refered to the scenario
        in: path
        name: study_id
        required: true
        schema:
          type: integer
      - description: scenario you want to update
        in: path
        name: scenario_id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScenarioPatchRequest'
        description: The fields you want to update
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScenarioResult'
          description: The scenario updated
      summary: update a scenario
      tags:
      - scenarios
  /rolling_stock/:
    post:
      parameters:
      - description: whether or not the rolling_stock can be edited/deleted.
        in: query
        name: locked
        schema:
          default: false
          type: boolean
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RollingStockUpsertPayload'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RollingStock'
          description: The created rolling stock
      summary: Create a rolling stock
      tags:
      - rolling_stock
  /rolling_stock/{id}/:
    delete:
      parameters:
      - description: rolling_stock id
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: force the deletion even if it’s used
        in: query
        name: force
        schema:
          default: false
          type: boolean
      responses:
        '204':
          description: No content
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RollingStockUsage'
          description: Rolling stock is used in a train schedule.
      summary: Delete a rolling_stock and all entities linked to it
      tags:
      - rolling_stock
    get:
      parameters:
      - description: Rolling Stock ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RollingStock'
          description: The rolling stock information
      summary: Retrieve a rolling stock
      tags:
      - rolling_stock
    patch:
      parameters:
      - description: Rolling Stock ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RollingStockUpsertPayload'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RollingStock'
          description: The updated rolling stock
      summary: Patch a rolling stock
      tags:
      - rolling_stock
  /rolling_stock/{id}/livery/:
    post:
      parameters:
      - description: Rolling Stock ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                images:
                  items:
                    format: binary
                    type: string
                  type: array
                name:
                  type: string
              type: object
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RollingStockLivery'
          description: The rolling stock livery
      summary: Create a rolling stock livery
      tags:
      - rolling_stock
      - rolling_stock_livery
  /rolling_stock/{id}/locked/:
    patch:
      parameters:
      - description: Rolling_stock id
        in: path
        name: id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              properties:
                locked:
                  type: boolean
              type: object
        description: New locked value
        required: true
      responses:
        '204':
          description: No content
        '404':
          description: Not found
      summary: Update rolling_stock locked field
      tags:
      - rolling_stock
  /search/:
    post:
      requestBody:
        content:
          application/json:
            schema:
              properties:
                object:
                  example: operationalpoint
                  type: string
                page:
                  default: 1
                  type: integer
                page_size:
                  default: 25
                  type: integer
                query:
                  $ref: '#/components/schemas/SearchQuery'
              type: object
        description: Search query
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  oneOf:
                  - $ref: '#/components/schemas/SearchTrackResult'
                  - $ref: '#/components/schemas/SearchOperationalPointResult'
                  - $ref: '#/components/schemas/SearchSignalResult'
                  - $ref: '#/components/schemas/SearchStudyResult'
                  - $ref: '#/components/schemas/SearchProjectResult'
                  - $ref: '#/components/schemas/SearchScenarioResult'
                type: array
          description: Search results, the structure of the returned objects depend on their type
      summary: Generic search endpoint
  /timetable/{id}/:
    get:
      parameters:
      - description: Timetable ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimetableWithSchedulesDetails'
          description: The timetable content
      summary: Retrieve a timetable and its train schedules
      tags:
      - timetable
  /timetable/{id}/conflicts/:
    get:
      parameters:
      - description: Timetable ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  properties:
                    conflict_type:
                      type: string
                    end_time:
                      type: string
                    start_time:
                      type: string
                    train_ids:
                      items:
                        type: number
                      type: array
                    train_names:
                      items:
                        type: string
                      type: array
                  required:
                  - train_ids
                  - train_names
                  - start_time
                  - end_time
                  - conflict_type
                  type: object
                type: array
          description: The timetable conflicts content
      summary: Retrieve all conflicts for a specific timetable
      tags:
      - timetable
  /train_schedule/results/:
    get:
      parameters:
      - description: Path id used to project the train path
        in: query
        name: path_id
        required: true
        schema:
          type: integer
      - description: List of train schedule ids to return the results of
        in: query
        name: train_ids
        required: true
        schema:
          pattern: ^\d+(,\d+)*$
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/SimulationReport'
                type: array
          description: The train schedules results
      summary: Retrieve the simulation result of multiple train schedules
      tags:
      - train_schedule
  /train_schedule/standalone_simulation/:
    post:
      requestBody:
        content:
          application/json:
            schema:
              items:
                $ref: '#/components/schemas/TrainSchedule'
              minItems: 1
              type: array
        description: The list of train schedules to simulate
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                items:
                  format: integer
                  type: number
                minItems: 1
                type: array
          description: The ids of the train_schedules created
      summary: Create a batch of train schedule and run simulations accordingly
      tags:
      - train_schedule
  /train_schedule/{id}/:
    delete:
      parameters:
      - description: Train schedule ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: No content
      summary: Delete a train schedule and its result
      tags:
      - train_schedule
    get:
      parameters:
      - description: Train schedule ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrainSchedule'
          description: The train schedule info
      summary: Retrieve a train schedule
      tags:
      - train_schedule
    patch:
      parameters:
      - description: Train schedule ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      requestBody:
        content:
          application/json:
            schema:
              items:
                $ref: '#/components/schemas/TrainSchedule'
              type: array
        description: Train schedule fields
        required: true
      responses:
        '200':
          description: The train schedule was updated successfully
      summary: Update a train_schedule and run a simulation accordingly
      tags:
      - train_schedule
  /train_schedule/{id}/result/:
    get:
      parameters:
      - description: Train schedule ID
        in: path
        name: id
        required: true
        schema:
          type: integer
      - description: Path id used to project the train path
        in: query
        name: path_id
        required: true
        schema:
          type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimulationReport'
          description: The train schedule result
      summary: Retrieve a simulation result
      tags:
      - train_schedule
  /version/:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  git_describe:
                    nullable: true
                    type: string
                required:
                - git_describe
                type: object
          description: Return the service version
tags:
- description: Infra
  name: infra
- description: Operations related to infra routes
  name: routes
- description: Timetable
  name: timetable
- description: Pathfinding operations
  name: pathfinding
- description: Map layers
  name: layers
- description: Electrical profiles
  name: electrical_profiles
- description: Train Schedule
  name: train_schedule

